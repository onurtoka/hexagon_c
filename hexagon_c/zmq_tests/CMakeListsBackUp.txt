cmake_minimum_required(VERSION 3.10)
project(zmq_pubsub_tests CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# --- Gerekli Kütüphaneleri Bulma ---
find_package(PkgConfig REQUIRED)
pkg_check_modules(ZMQ REQUIRED libzmq)

# --- Hedefleri Tanımlama ---
# Sadece iki PUB/SUB uygulamamızı derliyoruz.
add_executable(pub_epgm pub_epgm.cpp)
add_executable(pub_udp pub_udp.cpp)

# --- Kütüphaneleri ve Yolları Tüm Hedeflere Bağlama ---
foreach(TARGET pub_epgm pub_udp)
    # Gerekli başlık dosyalarının (header) yollarını belirtiyoruz.
    target_include_directories(${TARGET} PRIVATE
        "${CMAKE_SOURCE_DIR}/../third_party/cppzmq"
        ${ZMQ_INCLUDE_DIRS}
    )
    # Gerekli kütüphaneleri bağlıyoruz (linkliyoruz).
    target_link_libraries(${TARGET} PRIVATE
        ${ZMQ_LIBRARIES}
    )
endforeach()