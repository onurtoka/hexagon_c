<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hexagonal C++ Example: MISRA C++ 2023 Compliance Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mermaid.css" rel="stylesheet" type="text/css"/>
<!-- Mermaid.js for custom diagrams -->
<script src="mermaid.min.js"></script>
<script src="mermaid-init.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectname">Hexagonal C++ Example
  <span id="projectnumber">&#160;1.0</span>
  </td>
   <td>        C++17 Hexagonal Architecture Track Delay Calculator</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_2_m_i_s_r_a___c_p_p__2023___c_o_m_p_l_i_a_n_c_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">MISRA C++ 2023 Compliance Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md100"></a> </p>
<h1><a class="anchor" id="autotoc_md101"></a>
Overview</h1>
<p>This document outlines the MISRA C++ 2023 rules implemented in the B_Hexagon project and explains the refactoring decisions made to ensure compliance. MISRA C++ 2023 is a coding standard that aims to facilitate code safety, security, portability, and reliability in C++ applications.</p>
<h1><a class="anchor" id="autotoc_md102"></a>
Key MISRA C++ 2023 Rules Applied</h1>
<h2><a class="anchor" id="autotoc_md103"></a>
1. Header Guards (Rule 16-2-3)</h2>
<p><b>Rule</b>: All header files shall have header guards to prevent multiple inclusions.</p>
<p><b>Implementation</b>: Replaced <code>#pragma once</code> with traditional header guards for maximum portability.</p>
<p><b>Before</b>: </p><div class="fragment"><div class="line"><span class="preprocessor">#pragma once</span></div>
</div><!-- fragment --><p><b>After</b>: </p><div class="fragment"><div class="line"><span class="preprocessor">#ifndef DOMAIN_MODEL_TRACKDATA_HPP</span></div>
<div class="line"><span class="preprocessor">#define DOMAIN_MODEL_TRACKDATA_HPP</span></div>
<div class="line"><span class="comment">// ... content ...</span></div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">// DOMAIN_MODEL_TRACKDATA_HPP</span></div>
</div><!-- fragment --><p><b>Rationale</b>: While <code>#pragma once</code> is widely supported, header guards are more portable and guaranteed by the C++ standard.</p>
<h2><a class="anchor" id="autotoc_md104"></a>
2. Explicit Constructors (Rule 12-1-4)</h2>
<p><b>Rule</b>: All constructors that can be called with a single argument shall be declared explicit unless intended for implicit conversion.</p>
<p><b>Implementation</b>: Added <code>explicit</code> keyword to single-parameter constructors.</p>
<p><b>Before</b>: </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_zero_m_q_data_receiver.html">ZeroMQDataReceiver</a>(<span class="keyword">const</span> std::string&amp; endpoint);</div>
<div class="ttc" id="aclass_zero_m_q_data_receiver_html"><div class="ttname"><a href="class_zero_m_q_data_receiver.html">ZeroMQDataReceiver</a></div><div class="ttdoc">ZeroMQ SUB adapter for receiving TrackData published by a PUB socket (JSON format).</div><div class="ttdef"><b>Definition</b> ZeroMQDataReceiver.hpp:60</div></div>
</div><!-- fragment --><p><b>After</b>: </p><div class="fragment"><div class="line"><span class="keyword">explicit</span> <a class="code hl_class" href="class_zero_m_q_data_receiver.html">ZeroMQDataReceiver</a>(<span class="keyword">const</span> std::string&amp; endpoint) <span class="keyword">noexcept</span>;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md105"></a>
3. Resource Management (Rules 15-1-1, 15-3-3)</h2>
<p><b>Rule</b>: Use RAII (Resource Acquisition Is Initialization) and avoid naked pointers.</p>
<p><b>Implementation</b>: Used smart pointers and RAII patterns throughout the codebase.</p>
<p><b>Before</b>: </p><div class="fragment"><div class="line"><a class="code hl_interface" href="class_i_data_receiver.html">IDataReceiver</a>* receiver_;</div>
<div class="line"><a class="code hl_interface" href="class_i_data_sender.html">IDataSender</a>* sender_;</div>
<div class="ttc" id="aclass_i_data_receiver_html"><div class="ttname"><a href="class_i_data_receiver.html">IDataReceiver</a></div><div class="ttdoc">Abstraction for receiving a single TrackData instance from an external source.</div><div class="ttdef"><b>Definition</b> IDataReceiver.hpp:36</div></div>
<div class="ttc" id="aclass_i_data_sender_html"><div class="ttname"><a href="class_i_data_sender.html">IDataSender</a></div><div class="ttdoc">Abstraction representing a sink/egress for enriched track data.</div><div class="ttdef"><b>Definition</b> IDataSender.hpp:28</div></div>
</div><!-- fragment --><p><b>After</b>: </p><div class="fragment"><div class="line">std::unique_ptr&lt;IDataReceiver&gt; receiver_;</div>
<div class="line">std::unique_ptr&lt;IDataSender&gt; sender_;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md106"></a>
4. Exception Safety (Rule 15-3-4)</h2>
<p><b>Rule</b>: All functions shall specify their exception safety guarantee using noexcept.</p>
<p><b>Implementation</b>: Added appropriate <code>noexcept</code> specifications to functions that cannot throw.</p>
<p><b>Example</b>: </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_track_data.html">~TrackData</a>() noexcept = default;</div>
<div class="line"><a class="code hl_class" href="class_track_data.html">TrackData</a>(const <a class="code hl_class" href="class_track_data.html">TrackData</a>&amp; other) noexcept = default;</div>
<div class="ttc" id="aclass_track_data_html"><div class="ttname"><a href="class_track_data.html">TrackData</a></div><div class="ttdoc">Input domain value object carrying raw track kinematic &amp; timing attributes.</div><div class="ttdef"><b>Definition</b> TrackData.hpp:16</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md107"></a>
5. Const Correctness (Rule 7-1-2)</h2>
<p><b>Rule</b>: A pointer or reference parameter in a function shall be declared const if the corresponding object is not modified.</p>
<p><b>Implementation</b>: Added const qualifiers where appropriate and made member functions const when they don't modify object state.</p>
<p><b>Example</b>: </p><div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code hl_class" href="class_track_data.html">TrackData</a> parseJson(<span class="keyword">const</span> std::string&amp; json) <span class="keyword">noexcept</span>(<span class="keyword">false</span>);</div>
<div class="line"><span class="keywordtype">bool</span> isValid() const noexcept;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md108"></a>
6. Initialization (Rule 8-5-1)</h2>
<p><b>Rule</b>: All variables shall be initialized before being used.</p>
<p><b>Implementation</b>: Used member initializer lists and in-class initialization for all data members.</p>
<p><b>Before</b>: </p><div class="fragment"><div class="line"><span class="keyword">class </span><a class="code hl_class" href="class_track_data.html">TrackData</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code hl_variable" href="class_track_data.html#a52fac56e35b0b1e6d942e7943219e4de">trackId</a>;</div>
<div class="line">    <span class="keywordtype">double</span> <a class="code hl_variable" href="class_track_data.html#ac5d75ed5f3e29ba717e738af1b36bac0">xVelocityECEF</a>;</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">};</div>
<div class="ttc" id="aclass_track_data_html_a52fac56e35b0b1e6d942e7943219e4de"><div class="ttname"><a href="class_track_data.html#a52fac56e35b0b1e6d942e7943219e4de">TrackData::trackId</a></div><div class="ttdeci">int trackId</div><div class="ttdoc">Unique identifier for the TrackData.</div><div class="ttdef"><b>Definition</b> TrackData.hpp:18</div></div>
<div class="ttc" id="aclass_track_data_html_ac5d75ed5f3e29ba717e738af1b36bac0"><div class="ttname"><a href="class_track_data.html#ac5d75ed5f3e29ba717e738af1b36bac0">TrackData::xVelocityECEF</a></div><div class="ttdeci">double xVelocityECEF</div><div class="ttdoc">X velocity in ECEF coordinates (m/s)</div><div class="ttdef"><b>Definition</b> TrackData.hpp:19</div></div>
</div><!-- fragment --><p><b>After</b>: </p><div class="fragment"><div class="line"><span class="keyword">class </span><a class="code hl_class" href="class_track_data.html">TrackData</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code hl_variable" href="class_track_data.html#a52fac56e35b0b1e6d942e7943219e4de">trackId</a>{0};</div>
<div class="line">    <span class="keywordtype">double</span> <a class="code hl_variable" href="class_track_data.html#ac5d75ed5f3e29ba717e738af1b36bac0">xVelocityECEF</a>{0.0};</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md109"></a>
7. Type Safety (Rule 5-0-21)</h2>
<p><b>Rule</b>: The bitwise operators shall only be applied to operands of unsigned integral type.</p>
<p><b>Implementation</b>: Used explicit type conversions and avoided implicit conversions.</p>
<h2><a class="anchor" id="autotoc_md110"></a>
8. Memory Management (Rule 18-4-1)</h2>
<p><b>Rule</b>: Dynamic memory allocation and deallocation shall only be performed through appropriate RAII mechanisms.</p>
<p><b>Implementation</b>: Eliminated raw pointer usage and used smart pointers consistently.</p>
<h2><a class="anchor" id="autotoc_md111"></a>
9. Function Parameter Passing (Rule 8-4-2)</h2>
<p><b>Rule</b>: Parameters should be passed by const reference for non-trivial types.</p>
<p><b>Implementation</b>: Updated function signatures to pass complex objects by const reference.</p>
<p><b>Example</b>: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> send(<span class="keyword">const</span> <a class="code hl_class" href="class_delay_calculated_track_data.html">DelayCalculatedTrackData</a>&amp; data) <span class="keyword">noexcept</span>(<span class="keyword">false</span>) <span class="keyword">override</span>;</div>
<div class="ttc" id="aclass_delay_calculated_track_data_html"><div class="ttname"><a href="class_delay_calculated_track_data.html">DelayCalculatedTrackData</a></div><div class="ttdoc">Output domain value object aggregating original TrackData fields plus derived delay metrics.</div><div class="ttdef"><b>Definition</b> DelayCalculatedTrackData.hpp:15</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md112"></a>
10. Namespace Usage (Rule 7-3-1)</h2>
<p><b>Rule</b>: The global namespace shall not be polluted with using declarations.</p>
<p><b>Implementation</b>: Avoided <code>using namespace</code> declarations in header files and used explicit namespace qualification.</p>
<h1><a class="anchor" id="autotoc_md113"></a>
Refactoring Summary</h1>
<h2><a class="anchor" id="autotoc_md114"></a>
Files Modified for MISRA Compliance:</h2>
<ol type="1">
<li><b><a class="el" href="_track_data_8hpp.html">TrackData.hpp</a></b> - Added header guards, in-class initialization, const correctness</li>
<li><b><a class="el" href="_delay_calculated_track_data_8hpp.html">DelayCalculatedTrackData.hpp</a></b> - Same improvements as <a class="el" href="class_track_data.html" title="Input domain value object carrying raw track kinematic &amp; timing attributes.">TrackData</a></li>
<li><b><a class="el" href="_i_data_receiver_8hpp.html" title="Declares the incoming port abstraction for acquiring raw domain input (TrackData).">IDataReceiver.hpp</a></b> - Added noexcept specifications, const correctness</li>
<li><b><a class="el" href="_i_data_sender_8hpp.html" title="Declares the outgoing port abstraction for emitting processed DelayCalculatedTrackData.">IDataSender.hpp</a></b> - Added noexcept specifications, parameter passing improvements</li>
<li><b><a class="el" href="_calculator_service_8hpp.html" title="Declares the application service coordinating domain calculations and I/O.">CalculatorService.hpp</a></b> - Resource management with smart pointers, exception safety</li>
<li><b><a class="el" href="_zero_m_q_data_receiver_8hpp.html">ZeroMQDataReceiver.hpp</a></b> - Exception safety, const correctness, explicit constructors</li>
<li><b><a class="el" href="_zero_m_q_data_sender_8hpp.html">ZeroMQDataSender.hpp</a></b> - Same improvements as receiver</li>
<li><b><a class="el" href="main_8cpp.html" title="Application entry point demonstrating Hexagonal Architecture assembly.">main.cpp</a></b> - Smart pointer usage, exception handling</li>
</ol>
<h2><a class="anchor" id="autotoc_md115"></a>
Build System Updates:</h2>
<p>Updated CMakeLists.txt to enable additional compiler warnings and MISRA-related checks:</p>
<div class="fragment"><div class="line"># MISRA compliance flags</div>
<div class="line">target_compile_options(b_hexagon_app PRIVATE</div>
<div class="line">    -Wall -Wextra -Wpedantic</div>
<div class="line">    -Wconversion -Wsign-conversion</div>
<div class="line">    -Wcast-qual -Wcast-align</div>
<div class="line">    -Wredundant-decls</div>
<div class="line">    -Wunreachable-code</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"># Enable static analysis</div>
<div class="line">set(CMAKE_CXX_CLANG_TIDY clang-tidy -checks=-*,readability-*,modernize-*,performance-*)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md116"></a>
Benefits of MISRA C++ 2023 Compliance</h1>
<ol type="1">
<li><b>Enhanced Safety</b>: Reduced risk of undefined behavior and runtime errors</li>
<li><b>Improved Maintainability</b>: Code is more predictable and easier to understand</li>
<li><b>Better Performance</b>: Explicit resource management and const correctness enable optimizations</li>
<li><b>Portability</b>: Code works consistently across different compilers and platforms</li>
<li><b>Security</b>: Reduced attack surface through better memory management</li>
</ol>
<h1><a class="anchor" id="autotoc_md117"></a>
Static Analysis Tools</h1>
<p>To maintain MISRA compliance, the following tools are recommended:</p>
<ol type="1">
<li><b>Clang-Tidy</b>: Integrated into the build system for continuous checking</li>
<li><b>PC-lint Plus</b>: Commercial tool with comprehensive MISRA C++ rule checking</li>
<li><b>Cppcheck</b>: Open-source static analyzer with MISRA addon</li>
<li><b>SonarQube</b>: Platform for continuous code quality inspection</li>
</ol>
<h1><a class="anchor" id="autotoc_md118"></a>
Continuous Integration</h1>
<p>The project should integrate MISRA compliance checking into the CI/CD pipeline:</p>
<div class="fragment"><div class="line"># .github/workflows/misra-check.yml</div>
<div class="line">name: MISRA Compliance Check</div>
<div class="line">on: [push, pull_request]</div>
<div class="line">jobs:</div>
<div class="line">  misra-check:</div>
<div class="line">    runs-on: ubuntu-latest</div>
<div class="line">    steps:</div>
<div class="line">      - uses: actions/checkout@v2</div>
<div class="line">      - name: Run clang-tidy</div>
<div class="line">        run: |</div>
<div class="line">          clang-tidy src/**/*.cpp src/**/*.hpp \</div>
<div class="line">            -checks=-*,readability-*,modernize-*,performance-*,cert-*</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md119"></a>
Conclusion</h1>
<p>The refactored B_Hexagon project now adheres to key MISRA C++ 2023 guidelines, providing a safer, more maintainable, and more portable codebase. Regular static analysis and code reviews should be conducted to maintain this compliance as the project evolves. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
