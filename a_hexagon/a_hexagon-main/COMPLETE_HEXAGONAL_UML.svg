<svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg">
  <!-- Definitions for gradients and patterns -->
  <defs>
    <linearGradient id="hexGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e3f2fd;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#bbdefb;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="incomingGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e8f5e8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c8e6c9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="outgoingGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fff3e0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffe0b2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="externalSourceGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e0f2f1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#b2dfdb;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="externalConsumerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ffeee6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffab91;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="2" flood-opacity="0.3"/>
    </filter>
    <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="11" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#333" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="1000" fill="#f5f5f5"/>
  
  <rect x="50" y="50" rx="8" width="1300" stroke="#333" stroke-width="4"  height="560" fill="#ebebeb"/>

  <!-- Title -->
  <text x="700" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#333">
    A Hexagon Architecture - Track Data Extrapolation System
  </text>

  <!-- Large Hexagon (Domain Core) -->
  <polygon points="702,56 967,192 967,468 702,604 434,468 434,192"
         fill="url(#hexGradient)"
         stroke="#1976d2"
         stroke-width="4"
         filter="url(#shadow)"/>

  <!-- Domain Core Label -->
  <text x="700" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1976d2">
    DOMAIN CORE
  </text>

  <!-- Left Port (Incoming) - Inside Hexagon -->
  <rect x="520" y="310" width="205" height="55" rx="8" 
        fill="#4caf50" stroke="#388e3c" stroke-width="2" filter="url(#shadow)"/>
  <text x="625" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    TrackDataIncomingPort
  </text>
  <text x="625" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    (Interface)
  </text>
  <text x="522" y="358" text-anchor="left" font-family="Arial, sans-serif" font-size="9" fill="white">
    + processAndForwardTrackData(TrackData): void
  </text>

  <!-- Right Port (Outgoing) - Inside Hexagon -->
  <rect x="735" y="310" width="170" height="55" rx="8" 
        fill="#ff9800" stroke="#f57c00" stroke-width="2" filter="url(#shadow)"/>
  <text x="820" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    TrackDataOutgoingPort
  </text>
  <text x="820" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
    (Interface)
  </text>
  <text x="820" y="358" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">
    + sendExtrapData(): void
  </text>

  <!-- Logic Section in Hexagon -->
  <rect x="530" y="170" width="340" height="85" rx="12" 
        fill="#ffffff" stroke="#1976d2" stroke-width="2" filter="url(#shadow)"/>
  <text x="700" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#333">
    Logic Layer
  </text>
  
  <rect x="540" y="200" width="320" height="50" rx="5" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
  <text x="700" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">
    TrackDataExtrapolator
  </text>
  <text x="700" y="230" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">
    &lt;&lt;implement TrackDataIncomingPort&gt;&gt;
  </text>
  <text x="545" y="243" font-family="Arial, sans-serif" font-size="10" fill="#888">
    + extrapolateTo200Hz(TrackData): ExtrapTrackData[]
  </text>

  <!-- Model Section in Hexagon -->
  <rect x="550" y="390" width="300" height="125" rx="12" 
        fill="#ffffff" stroke="#1976d2" stroke-width="2" filter="url(#shadow)"/>
  <text x="700" y="415" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#333">
    Model Layer
  </text>
  
  <rect x="570" y="425" width="125" height="80" rx="5" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
  <text x="630" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">
    TrackData
  </text>
  <text x="580" y="455" font-family="Arial, sans-serif" font-size="9" fill="#666">
    + TrackId: int
  </text>
  <text x="580" y="468" font-family="Arial, sans-serif" font-size="9" fill="#666">
    + VelocityECEF*: double
  </text>
  <text x="580" y="481" font-family="Arial, sans-serif" font-size="9" fill="#666">
    + PositionECEF*: double
  </text>
   <text x="580" y="494" font-family="Arial, sans-serif" font-size="9" fill="#666">
    + originalUpdateTime: long
  </text>

  <rect x="720" y="425" width="120" height="80" rx="5" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
  <text x="780" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">
    ExtrapTrackData
  </text>
  <text x="730" y="455" font-family="Arial, sans-serif" font-size="9" fill="#666">
    + TrackId: int
  </text>
  <text x="730" y="468" font-family="Arial, sans-serif" font-size="9" fill="#666">
    + VelocityECEF*: double
  </text>
  <text x="730" y="481" font-family="Arial, sans-serif" font-size="9" fill="#666">
    + PositionECEF*: double
  </text>
   <text x="730" y="494" font-family="Arial, sans-serif" font-size="9" fill="#666">
    + Time*: long
  </text>

  <!-- Left Side - Incoming Adapters -->
  <rect x="80" y="200" width="300" height="180" rx="20" 
        fill="url(#incomingGradient)" stroke="#4caf50"  stroke-width="4" filter="url(#shadow)"/>
  
  <text x="230" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#2e7d32">
    INCOMING ADAPTERS
  </text>

  <!-- Incoming Adapter -->
  <pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="8" height="8" patternTransform="rotate(45)">
    <rect width="8" height="8" fill="#6b6b6b"/>
    <path d="M 0 0 L 0 8" stroke="#000000" stroke-width="2"/>
  </pattern>

  <rect x="110" y="230" width="240" height="100" rx="10"
      fill="url(#diagonalHatch)" 
      stroke="#4caf50" 
      stroke-width="2" 
      filter="url(#shadow)"/>

  <!-- External Data Source - Outside and below incoming adapters (TEAL COLOR) -->
  <rect x="110" y="400" width="240" height="55" rx="10" 
        fill="url(#externalSourceGradient)" stroke="#00695c" stroke-width="3" filter="url(#shadow)"/>
  <text x="230" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#004d40">
    External Data Source
  </text>
  <text x="230" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#00695c">
    Track Data Producer @ 5Hz
  </text>
 

  <!-- Right Side - Outgoing Adapters -->
  <rect x="1020" y="200" width="300" height="180" rx="20" 
        fill="url(#outgoingGradient)" stroke="#ff9800" stroke-width="4" filter="url(#shadow)"/>
  
  <text x="1170" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#e65100">
    OUTGOING ADAPTERS
  </text>

  <!-- ZeroMQ Outgoing Adapter -->
  <rect x="1050" y="230" width="240" height="95" rx="10" 
        fill="#ffffff" stroke="#ff9800" stroke-width="2" filter="url(#shadow)"/>
  <text x="1170" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">
    ZeroMQExtrapTrackDataAdapter
  </text>
  <text x="1170" y="270" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">
     &lt;&lt;implement TrackDataOutgoingPort&gt;&gt;
  </text>
 
  <text x="1060" y="285" font-family="Arial, sans-serif" font-size="11" fill="#666">
    + connectSocket(): void
  </text>
  <text x="1060" y="300" font-family="Arial, sans-serif" font-size="11" fill="#666">
    + serialize(ExtrapTrackData): string
  </text>
 
  <text x="1060" y="315" font-family="Arial, sans-serif" font-size="11" fill="#666">
    + sendExtrapData(): void
  </text>

  <!-- External Consumer - Outside and below outgoing adapters (ORANGE-RED COLOR) -->
  <rect x="1050" y="400" width="240" height="55" rx="10" 
        fill="url(#externalConsumerGradient)" stroke="#d84315" stroke-width="3" filter="url(#shadow)"/>
  <text x="1170" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#bf360c">
    External Consumer
  </text>
  <text x="1170" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#d84315">
    Extrapolated Data Consumer @ 200Hz
  </text>

  <!-- Explanation -->
  <rect x="80" y="650" width="240" height="230" rx="10" 
        fill="#ffffff" stroke="#787676" stroke-width="2" filter="url(#shadow)"/>
  <text x="200" y="670" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">
    Explanation of Model Layer
  </text>
  
  <!-- VelocityECEF -->
  <text x="100" y="690" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">
     VelocityECEF:
  </text>
  <text x="120" y="705" font-family="Arial, sans-serif" font-size="11" fill="#666">
    XVelocityECEF
  </text>
  <text x="120" y="720" font-family="Arial, sans-serif" font-size="11" fill="#666">
    YVelocityECEF
  </text>
  <text x="120" y="735" font-family="Arial, sans-serif" font-size="11" fill="#666">
    ZVelocityECEF
  </text>
  
  <!-- PositionECEF -->
  <text x="100" y="755" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">
     PositionECEF:
  </text>
  <text x="120" y="770" font-family="Arial, sans-serif" font-size="11" fill="#666">
    XPositionECEF
  </text>
  <text x="120" y="785" font-family="Arial, sans-serif" font-size="11" fill="#666">
    YPositionECEF
  </text>
  <text x="120" y="800" font-family="Arial, sans-serif" font-size="11" fill="#666">
    ZPositionECEF
  </text>
  
  <!-- Time -->
  <text x="100" y="820" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">
     Time:
  </text>
  <text x="120" y="835" font-family="Arial, sans-serif" font-size="11" fill="#666">
    originalUpdateTime
  </text>
  <text x="120" y="850" font-family="Arial, sans-serif" font-size="11" fill="#666">
    updateTime
  </text>
 
  <text x="120" y="865" font-family="Arial, sans-serif" font-size="11" fill="#666">
    firstHopSentTime
  </text>

  <!-- Application Layer - More space from domain -->
  <rect x="450" y="700" width="500" height="85" rx="15" 
        fill="#f3e5f5" stroke="#9c27b0" stroke-width="4" filter="url(#shadow)"/>
  <text x="700" y="725" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#7b1fa2">
    APPLICATION LAYER
  </text>
  <text x="700" y="750" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#333">
    main.cpp
  </text>
  <text x="700" y="770" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">
    + Orchestrates adapters and domain logic
  </text>

  <!-- Symmetric Angular Arrows -->
  
  <!-- External to Incoming Adapter -->
  <path d="M 230 400 L 230 330" stroke="#00695c" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Incoming Adapter to Port -->
  <path d="M 350 280 L 450 280 L 450 330 L 500 330 L 520 330" stroke="#4caf50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Port to Domain Logic -->
  <path d="M 580 310 L 580 255" stroke="#1976d2" stroke-width="1" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Domain Logic to Outgoing Port -->
  <path d="M 820 255 L 820 310" stroke="#ff9800" stroke-width="1" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Outgoing Port to Adapter -->
  <path d="M 880 330 L 950 330 L 950 280 L 1000 280 L 1050 280" stroke="#ff9800" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Outgoing Adapter to External -->
  <path d="M 1170 325 L 1170 400" stroke="#d84315" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <text x="1180" y="365" font-family="Arial, sans-serif" font-size="10" fill="#d84315" font-weight="bold">ZeroMQ</text>

  <!-- Application to Domain -->
  <path d="M 702 700 L 702 610" stroke="#9c27b0" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="715" y="665" font-family="Arial, sans-serif" font-size="11" fill="#9c27b0" font-weight="bold">Orchestrates</text>

  <!-- Data Flow Labels -->
  <text x="700" y="850" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#333">
    Data Flow: 5Hz ProcessedTrackData → Extrapolation Logic → 200Hz ExtrapTrackData
  </text>
  
  <!-- Architecture Pattern Info -->
  <text x="700" y="880" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#666">
    Hexagonal Architecture (Ports &amp; Adapters Pattern) - Dependency Inversion Principle
  </text>
  
  <!-- Legend -->
  <rect x="80" y="910" width="1240" height="70" rx="8" fill="#ffffff" stroke="#ccc" stroke-width="2"/>
  <text x="95" y="935" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">Legend:</text>
  
  <circle cx="120" cy="955" r="10" fill="#4caf50"/>
  <text x="140" y="962" font-family="Arial, sans-serif" font-size="11" fill="#333">Incoming (Primary) Adapters</text>
  
  <circle cx="350" cy="955" r="10" fill="#ff9800"/>
  <text x="370" y="962" font-family="Arial, sans-serif" font-size="11" fill="#333">Outgoing (Secondary) Adapters</text>
  
  <polygon points="580,950 600,955 580,960" fill="#1976d2"/>
  <text x="610" y="962" font-family="Arial, sans-serif" font-size="11" fill="#333">Domain Core</text>

  <circle cx="750" cy="955" r="10" fill="#9c27b0"/>
  <text x="770" y="962" font-family="Arial, sans-serif" font-size="11" fill="#333">Application Layer</text>

  <circle cx="930" cy="955" r="10" fill="#00695c"/>
  <text x="950" y="962" font-family="Arial, sans-serif" font-size="11" fill="#333">External Data Source</text>

  <circle cx="1150" cy="955" r="10" fill="#d84315"/>
  <text x="1170" y="962" font-family="Arial, sans-serif" font-size="11" fill="#333">External Consumer</text>
  
</svg>